#!/bin/sh
##
# ~/.dwmbar

clock() {

        clock="$(date +"  %Y %b %d (%a) %I:%M %p")"
        echo $clock
}

cpuload() {

        read -r load x </proc/loadavg
        echo "$load% |"
}

cputemp() {

        read -r temp </sys/devices/platform/coretemp.0/hwmon/hwmon1/temp1_input
        echo " |" ${temp%???}°
}

hdd() {
        printf ""
        df --output=avail -h "$PWD"  | sed '1d'

 }

mem() {

        free -m | awk 'NR==2{printf"%s/%sMB (%.2f%%) |", $3,$2,$3*100/$2 }'
}

ipaddr(){

        ip addr show wlp3s1|grep inet |head -1 | awk '{ print$2"  | "}'
}

while true; do
        xsetroot -name " $(ipaddr)$(mem) $(hdd)$(cputemp) $(cpuload) $(clock) "
   sleep 60s #update time every minute
done &
