#!/bin/sh
##
# ~/.dwmbar

clock() {

        clock="$(date +" %Y %b %d (%a) %I:%M %p")"
        echo $clock
}

weather() {

        weather=$(curl -s wttr.in/?format=%t)
        printf "%s" "" " $weather"
}

volume() {

        VOL=$(amixer -M get Master | tail -n1 | sed -r "s/.*\[(.*)%\].*/\1/")
	printf " %s%%" "$VOL"
}

cpuload() {

        read -r load x </proc/loadavg
        echo "$load%"
}

cputemp() {

        read -r temp </sys/devices/platform/coretemp.0/hwmon/hwmon1/temp1_input
        echo  ${temp%???}°
}

hdd() {

        printf ""
        df --output=avail -h "$PWD"  | sed '1d'

}

mem() {

        free -m | awk 'NR==2{printf"%s/%sMB",$3,$2,$3*100/$2}'
}

ipaddr(){

        ip addr show wlp3s1|grep inet |head -1 | awk '{ print$2"  "}'
}

while true; do
	xsetroot -name " $(ipaddr)| $(mem) | $(hdd) | $(cputemp) | $(cpuload) | $(volume) | $(weather) | $(clock) "
   sleep 60s #update time every minute
done &
